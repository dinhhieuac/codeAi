-------------------update ngay 05/02/2026----------------------------
1.RSI Threshold: Tránh lệnh khi RSI cực đoan (thêm rule: Chỉ BUY nếu RSI 40-60, SELL nếu 40-60; bỏ lệnh nếu >70 hoặc <30). Lý do: Losses RSI     mean cao hơn wins, giảm overbought/oversold fake.
2.ADX Minimum: Yêu cầu ADX >35 cho tất cả lệnh (như V2 thành công). Giảm losses ở sideway (ADX mean losses thấp hơn).
-------------update 10/02/2026----------------
ha_v2
displacement_required=true
liquidity_sweep_required=true
h1_trend_confirmation_required=true
1. RSI Ranges Updated:
BUY: Changed from 40-60 to 50-65
SELL: Changed from 40-60 to 35-50
Updated in all relevant locations (signal checks and summary sections)
2. ADX Filter Changed:
Old: Checked if ADX > 35
New: Checks if ADX current > ADX previous (only trades when trend is strengthening)
Updated the filter logic, error messages, and summary output
The strategy now:
Only enters BUY when RSI is between 50-65
Only enters SELL when RSI is between 35-50
Only trades when ADX is increasing (trend strengthening), not just above a fixed threshold
------update 28/02/2026-----------------------
trend_ha

Chặn mở lệnh mới nếu (now - last_trade_time) < 60s (nên lưu “last_trade_time” ổn định, tránh reset sai)
1) Chống “repaint / vào theo nến chưa đóng”
Tất cả điều kiện signal/trend/ADX/RSI chuyển sang dùng nến đã đóng (-2, -3) khi use_closed_candles=true.
2) Doji filter đúng Heiken Ashi
Thay is_doji() (nến thường) → is_doji_ha() (dùng ha_open/ha_close/ha_high/ha_low).
3) SL auto_m5 bớt cứng: buffer theo ATR
buffer và min_dist giờ có thể lấy theo ATR M5 (vẫn có min/max để không bị quá nhỏ/quá to).
4) Breakeven/Trailing “auto” chuẩn hơn
Khi vào lệnh, bot lưu initial SL distance theo ticket (file initial_sl_map.json).
manage_position() ưu tiên dùng initial SL thật để tính trigger, không còn phải ước lượng kiểu “<5 pips thì cho 100”.